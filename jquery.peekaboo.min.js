/**
 * peekaboo
 *
 * A simple easy-to-use jQuery plugin for collapsing/expanding html
 *
 * @author yushi
 * @license MIT-license
 */

!function(e){function t(a,i){this.$parent=e(a),this.$children=this.$parent.children(),this.data=e.extend({$pab:this,state:{active:!1}},t.default,i),this.$parent.data("peekaboo-open")&&(this.data.openText=this.$parent.data("peekaboo-open")),this.$parent.data("peekaboo-close")&&(this.data.closeText=this.$parent.data("peekaboo-close")),this.expander=e(this.data.expanderElement).html(this.data.state.active?this.data.closeText:this.data.openText).data("jquery.peekaboo.expander",this.data),this.data.state.active&&this.$parent.addClass(this.data.activeClass),this.build()}t.prototype.build=function(){switch(this.data.enableAutoHide&&this.$children.length<=this.data.windowSize&&this.expander.hide(),this.data.expanderPlacement){case"innerbefore":this.$parent.prepend(this.expander);break;case"innerafter":this.$parent.append(this.expander);break;case"outerbefore":this.expander.insertBefore(this.$parent);break;case"outerafter":this.expander.insertAfter(this.$parent)}this.data.state.active?this.open():this.close(),this.expander.on("click.peekaboo",function(){var t=e(this).data("jquery.peekaboo.expander");t.state.active?(t.$pab.close(),t.state.active=!1,e(this).html(t.openText)):(t.$pab.open(),t.state.active=!0,e(this).html(t.closeText));var a=t.$pab.$parent;a.hasClass(t.activeClass)?a.removeClass(t.activeClass):a.addClass(t.activeClass)})},t.default={activeClass:"active",expanderElement:"<div>",expanderPlacement:"innerafter",enableAutoHide:!0,openText:"open",closeText:"close",windowSize:10},t.prototype.close=function(){var t=this.data,a=this.expander;this.$children.each(function(i){i>=t.windowSize&&a!==e(this)&&e(this).hide()})},t.prototype.open=function(){this.$children.each(function(){e(this).show()})},e.fn.peekaboo=function(a){return this.each(function(){!e(this).data("jquery.peekaboo")&&e(this).data("jquery.peekaboo",new t(e(this),a))})},e.fn.peekaboo.Constructor=t}($=jQuery.noConflict());